<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Rewrite - Settings</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
</head>
<body class="bg-gray-900 text-white">
    <div class="container mx-auto p-4">
        <!-- Title Bar -->
        <div class="flex items-center justify-between mb-8 drag-handle">
            <div></div>
            <button class="text-2xl" onclick="pywebview.api.close_window()">Ã—</button>
        </div>

        <!-- Settings Content -->
        <div class="space-y-6">
            <h2 class="text-3xl font-bold">Settings</h2>

            <!-- OpenAI Settings -->
            <div class="p-4 border border-gray-700 rounded-lg">
                <h3 class="text-xl font-semibold mb-4">OpenAI</h3>
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-1" for="api_key">API Key:</label>
                    <input type="text" id="api_key" class="w-full p-2 bg-gray-800 border border-gray-700 rounded">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-1" for="base_url">Base URL:</label>
                    <input type="text" id="base_url" class="w-full p-2 bg-gray-800 border border-gray-700 rounded">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-1" for="model">Model:</label>
                    <input type="text" id="model" class="w-full p-2 bg-gray-800 border border-gray-700 rounded">
                </div>
            </div>

            <!-- System Message Settings -->
            <div class="p-4 border border-gray-700 rounded-lg">
                <h3 class="text-xl font-semibold mb-4">System Message</h3>
                <label class="block text-sm font-medium mb-1" for="system_message">System Message:</label>
                <textarea id="system_message" class="w-full p-2 bg-gray-800 border border-gray-700 rounded" rows="4"></textarea>
            </div>

            <!-- Tones Settings -->
            <div class="p-4 border border-gray-700 rounded-lg">
                <h3 class="text-xl font-semibold mb-4">Tones</h3>
                <div id="tones-list" class="space-y-4">
                    <!-- Tones will be loaded here -->
                </div>

                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4" onclick="show_new_tone_form()">Add Tone</button>
                <div id="new_tone_form" class="hidden mt-4">
                    <h4 class="text-lg font-semibold mb-2">Add New Tone:</h4>
                    <input type="text" id="new_tone_name" class="w-full p-2 bg-gray-800 border border-gray-700 rounded mb-2" placeholder="Name">
                    <input type="text" id="new_tone_icon" class="w-full p-2 bg-gray-800 border border-gray-700 rounded mb-2" placeholder="Icon">
                    <textarea id="new_tone_prompt" class="w-full p-2 bg-gray-800 border border-gray-700 rounded mb-2" placeholder="Prompt"></textarea>
                    <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mr-2" onclick="add_new_tone()">Save Tone</button>
                    <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" onclick="hide_new_tone_form()">Cancel</button>
                </div>
            </div>

             <!-- Format Settings -->
            <div class="p-4 border border-gray-700 rounded-lg">
                <h3 class="text-xl font-semibold mb-4">Formats</h3>
                <div id="formats-list" class="space-y-4">
                    <!-- Formats will be loaded here -->
                </div>

                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4" onclick="show_new_format_form()">Add Format</button>
                <div id="new_format_form" class="hidden mt-4">
                    <h4 class="text-lg font-semibold mb-2">Add New Format:</h4>
                    <input type="text" id="new_format_name" class="w-full p-2 bg-gray-800 border border-gray-700 rounded mb-2" placeholder="Name">
                    <input type="text" id="new_format_icon" class="w-full p-2 bg-gray-800 border border-gray-700 rounded mb-2" placeholder="Icon">
                    <textarea id="new_format_prompt" class="w-full p-2 bg-gray-800 border border-gray-700 rounded mb-2" placeholder="Prompt"></textarea>
                    <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mr-2" onclick="add_new_format()">Save Format</button>
                    <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" onclick="hide_new_format_form()">Cancel</button>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex justify-end mt-6 space-x-4">
                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" onclick="saveSettings()">Save</button>
                <button class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded" onclick="resetToDefaults()">Reset to Defaults</button>
            </div>
        </div>
    </div>
    <script src="static/settings.js"></script>
</body>
</html>
